"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ajax={_createXHR:function(){try{return new window.XMLHttpRequest}catch(t){throw new Error("Error creating the XMLHttpRequest object")}},_parseQuery:function(t,e,n){var r=t;if(e){r+="?";for(var s in e)r+=s+"="+e[s]+"&";r=r.replace(/&$/,"")}return n&&(r+="#"+n),r},query:function t(e){var n=this._createXHR(),r=e.url,s=e.method,a=e.params,o=e.fragment,t=this._parseQuery(r,a,o);return n.open(s,t,!0),n.send(),new Promise(function(t,e){n.onreadystatechange=function(){4===this.readyState?t(this.responseText):(403===this.status||404===this.status)&&e("Status code "+this.status)}})},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=this._createXHR(),r="GET";if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var s=t,a=s.params,o=s.fragment;t=this._parseQuery(t.url,a,o)}return n.open(r,t,!0),n.send(),new Promise(function(t,r){n.onreadystatechange=function(){if(4===this.readyState){var n=this.responseText,s=e?JSON.parse(n):n;t(s)}else(403===this.status||404===this.status)&&r("Status code "+this.status)}})},post:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,r=this._createXHR(),s="POST",a="application/";if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var o=t,u=o.params,i=o.fragment;t=this._parseQuery(t.url,u,i)}return n?(e=JSON.stringify(e),a+="json"):a+="x-www-form-urlencoded",r.open(s,t,!0),r.setRequestHeader("Content-Type",a),r.send(e),new Promise(function(t,e){r.onreadystatechange=function(){4===this.readyState?t(this.responseText):(403===this.status||404===this.status)&&e("Status code "+this.status)}})}};