"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),Ajax=function(){function e(t){_classCallCheck(this,e),this.method=t.method,this.url=t.url,this.params=t.params,this.fragment=t.fragment,this.headers=t.headers,this.xhr=e._createXHR(),this.uri=e._parseQuery(this.url,this.params,this.fragment);var r=t.success,s=t.error;this.headers&&Object.keys(this.headers).forEach(function(e){var t=this.headers[e];this.xhr.setRequestHeader(e,t)}),this.xhr.open(this.method,this.uri,!0),this.xhr.send();this.xhr.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=this.responseText,t=this.getResponseHeader("Content-Type");console.log(t),t.includes("application/json")&&(e=JSON.parse(e)),r&&r(e)}else s&&4===this.readyState&&s(this.status,this.getAllResponseHeaders())}}return _createClass(e,null,[{key:"_createXHR",value:function(){try{return new window.XMLHttpRequest}catch(e){throw new Error("Error creating the XMLHttpRequest object")}}},{key:"_parseQuery",value:function(e,t,r){var s=e;if(t){s+="?";for(var a in t)s+=a+"="+t[a]+"&";s=s.replace(/&$/,"")}return r&&(s+="#"+r),s}}]),e}();